!function s(n,r,o){function a(t,e){if(!r[t]){if(!n[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);throw(i=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",i}i=r[t]={exports:{}},n[t][0].call(i.exports,function(e){return a(n[t][1][e]||e)},i,i.exports,s,n,r,o)}return r[t].exports}for(var c="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,i,t){!function(e,S){"use strict";var M=Math.pow(2,-24),n=Math.pow(2,32),v=Math.pow(2,53),t={encode:function(e){var o,a=new ArrayBuffer(256),c=new DataView(a),l=0;function h(e){for(var t=a.byteLength,i=l+e;t<i;)t*=2;if(t!==a.byteLength){var s=c;a=new ArrayBuffer(t),c=new DataView(a);for(var n=l+3>>2,r=0;r<n;++r)c.setUint32(4*r,s.getUint32(4*r))}return o=e,c}function u(){l+=o}function p(e){u(h(1).setUint8(l,e))}function f(e){for(var t=h(e.length),i=0;i<e.length;++i)t.setUint8(l+i,e[i]);u()}function m(e,t){var i,s;t<24?p(e<<5|t):t<256?(p(e<<5|24),p(t)):t<65536?(p(e<<5|25),s=t,u(h(2).setUint16(l,s))):t<4294967296?(p(e<<5|26),i=t,u(h(4).setUint32(l,i))):(p(e<<5|27),t=((i=t)-(e=i%n))/n,(i=h(8)).setUint32(l,t),i.setUint32(l+4,e),u())}if(!function e(t){var i;if(!1===t)return p(244),0;if(!0===t)return p(245),0;if(null===t)return p(246),0;if(t===S)return p(247),0;switch(typeof t){case"number":if(Math.floor(t)===t){if(0<=t&&t<=v)return m(0,t),0;if(-v<=t&&t<0)return m(1,-(t+1)),0}return p(251),i=t,u(h(8).setFloat64(l,i)),0;case"string":for(var s=[],n=0;n<t.length;++n){var r=t.charCodeAt(n);r<128?s.push(r):(r<2048?s.push(192|r>>6):(r<55296?s.push(224|r>>12):(r=(1023&r)<<10,r|=1023&t.charCodeAt(++n),r+=65536,s.push(240|r>>18),s.push(128|r>>12&63)),s.push(128|r>>6&63)),s.push(128|63&r))}return m(3,s.length),f(s),0;default:if(Array.isArray(t))for(m(4,o=t.length),n=0;n<o;++n)e(t[n]);else if(t instanceof Uint8Array)m(2,t.length),f(t);else{var o,a=Object.keys(t);for(m(5,o=a.length),n=0;n<o;++n){var c=a[n];e(c),e(t[c])}}}}(e),"slice"in a)return a.slice(0,l);for(var e=new ArrayBuffer(l),t=new DataView(e),i=0;i<l;++i)t.setUint8(i,c.getUint8(i));return e},decode:function(t,p,f){var m=new DataView(t),v=0;function d(e,t){return v+=t,e}function y(e){return d(new Uint8Array(t,v,e),e)}function g(){return d(m.getUint8(v),1)}function b(){return d(m.getUint16(v),2)}function i(){return d(m.getUint32(v),4)}function w(){return 255===m.getUint8(v)&&(v+=1,1)}function _(e){if(e<24)return e;if(24===e)return g();if(25===e)return b();if(26===e)return i();if(27===e)return i()*n+i();if(31===e)return-1;throw"Invalid length encoding"}function x(e){var t=g();if(255===t)return-1;var i=_(31&t);if(i<0||t>>5!==e)throw"Invalid indefinite length element";return i}function T(e,t){for(var i=0;i<t;++i){var s=g();128&s&&(s<224?(s=(31&s)<<6|63&g(),--t):s<240?(s=(15&s)<<12|(63&g())<<6|63&g(),t-=2):(s=(15&s)<<18|(63&g())<<12|(63&g())<<6|63&g(),t-=3)),s<65536?e.push(s):(s-=65536,e.push(55296|s>>10),e.push(56320|1023&s))}}"function"!=typeof p&&(p=function(e){return e}),"function"!=typeof f&&(f=function(){return S});var e=function e(){var t,i,s=g(),n=s>>5,s=31&s;if(7==n)switch(s){case 25:return function(){var e=new ArrayBuffer(4),t=new DataView(e),i=32768&(s=b()),e=31744&s,s=1023&s;if(31744===e)e=261120;else if(0!==e)e+=114688;else if(0!=s)return s*M;return t.setUint32(0,i<<16|e<<13|s<<13),t.getFloat32(0)}();case 26:return d(m.getFloat32(v),4);case 27:return d(m.getFloat64(v),8)}if((t=_(s))<0&&(n<2||6<n))throw"Invalid length";switch(n){case 0:return t;case 1:return-1-t;case 2:if(t<0){for(var r=[],o=0;0<=(t=x(n));)o+=t,r.push(y(t));for(var a=new Uint8Array(o),c=0,l=0;l<r.length;++l)a.set(r[l],c),c+=r[l].length;return a}return y(t);case 3:var h=[];if(t<0)for(;0<=(t=x(n));)T(h,t);else T(h,t);return String.fromCharCode.apply(null,h);case 4:if(t<0)for(i=[];!w();)i.push(e());else for(i=new Array(t),l=0;l<t;++l)i[l]=e();return i;case 5:var u={};for(l=0;l<t||t<0&&!w();++l)u[e()]=e();return u;case 6:return p(e(),t);case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return S;default:return f(t)}}}();if(v!==t.byteLength)throw"Remaining bytes";return e}};"function"==typeof define&&define.amd?define("cbor/cbor",t):void 0!==i&&i.exports?i.exports=t:e.CBOR||(e.CBOR=t)}(this)},{}],2:[function(e,n,r){(function(s){function l(){this._events={},this._conf&&t.call(this,this._conf)}function t(e){e?((this._conf=e).delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==h?e.maxListeners:i,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=i}function o(e,t){var i="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak&&(i+=" Event name: "+t+"."),void 0!==s&&s.emitWarning?((t=new Error(i)).name="MaxListenersExceededWarning",t.emitter=this,t.count=e,s.emitWarning(t)):(console.error(i),console.trace&&console.trace())}function e(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,t.call(this,e)}function v(e,t,i,s){if(!i)return[];var n,r,o,a,c,l,h,u=[],p=t.length,f=t[s],m=t[s+1];if(s===p&&i._listeners){if("function"==typeof i._listeners)return e&&e.push(i._listeners),[i];for(n=0,r=i._listeners.length;n<r;n++)e&&e.push(i._listeners[n]);return[i]}if("*"===f||"**"===f||i[f]){if("*"===f){for(o in i)"_listeners"!==o&&i.hasOwnProperty(o)&&(u=u.concat(v(e,t,i[o],s+1)));return u}if("**"===f){for(o in(h=s+1===p||s+2===p&&"*"===m)&&i._listeners&&(u=u.concat(v(e,t,i,p))),i)"_listeners"!==o&&i.hasOwnProperty(o)&&(u="*"===o||"**"===o?(i[o]._listeners&&!h&&(u=u.concat(v(e,t,i[o],p))),u.concat(v(e,t,i[o],s))):o===m?u.concat(v(e,t,i[o],s+2)):u.concat(v(e,t,i[o],s)));return u}u=u.concat(v(e,t,i[f],s+1))}if((a=i["*"])&&v(e,t,a,s+1),c=i["**"])if(s<p)for(o in c._listeners&&v(e,t,c,p),c)"_listeners"!==o&&c.hasOwnProperty(o)&&(o===m?v(e,t,c[o],s+2):o===f?v(e,t,c[o],s+1):((l={})[o]=c[o],v(e,t,{"**":l},s+1)));else c._listeners?v(e,t,c,p):c["*"]&&c["*"]._listeners&&v(e,t,c["*"],p);return u}var h,u,i;u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=10,(e.EventEmitter2=e).prototype.delimiter=".",e.prototype.setMaxListeners=function(e){e!==h&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},e.prototype.event="",e.prototype.once=function(e,t){return this._once(e,t,!1)},e.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},e.prototype._once=function(e,t,i){return this._many(e,1,t,i),this},e.prototype.many=function(e,t,i){return this._many(e,t,i,!1)},e.prototype.prependMany=function(e,t,i){return this._many(e,t,i,!0)},e.prototype._many=function(e,t,i,s){var n=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");function r(){return 0==--t&&n.off(e,r),i.apply(this,arguments)}return r._origin=i,this._on(e,r,s),n},e.prototype.emit=function(){this._events||l.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,i,s,n,r,o=arguments.length;if(this._all&&this._all.length){if(r=this._all.slice(),3<o)for(t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];for(s=0,i=r.length;s<i;s++)switch(this.event=e,o){case 1:r[s].call(this,e);break;case 2:r[s].call(this,e,arguments[1]);break;case 3:r[s].call(this,e,arguments[1],arguments[2]);break;default:r[s].apply(this,t)}}if(this.wildcard){r=[];var a="string"==typeof e?e.split(this.delimiter):e.slice();v.call(this,r,a,this.listenerTree,0)}else{if("function"==typeof(r=this._events[e])){switch(this.event=e,o){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(o-1),n=1;n<o;n++)t[n-1]=arguments[n];r.apply(this,t)}return!0}r=r&&r.slice()}if(r&&r.length){if(3<o)for(t=new Array(o-1),n=1;n<o;n++)t[n-1]=arguments[n];for(s=0,i=r.length;s<i;s++)switch(this.event=e,o){case 1:r[s].call(this);break;case 2:r[s].call(this,arguments[1]);break;case 3:r[s].call(this,arguments[1],arguments[2]);break;default:r[s].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},e.prototype.emitAsync=function(){this._events||l.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,i,s,n,r,o,a=[],c=arguments.length;if(this._all){if(3<c)for(t=new Array(c),n=1;n<c;n++)t[n]=arguments[n];for(s=0,i=this._all.length;s<i;s++)switch(this.event=e,c){case 1:a.push(this._all[s].call(this,e));break;case 2:a.push(this._all[s].call(this,e,arguments[1]));break;case 3:a.push(this._all[s].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[s].apply(this,t))}}if(this.wildcard?(r=[],o="string"==typeof e?e.split(this.delimiter):e.slice(),v.call(this,r,o,this.listenerTree,0)):r=this._events[e],"function"==typeof r)switch(this.event=e,c){case 1:a.push(r.call(this));break;case 2:a.push(r.call(this,arguments[1]));break;case 3:a.push(r.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),n=1;n<c;n++)t[n-1]=arguments[n];a.push(r.apply(this,t))}else if(r&&r.length){if(r=r.slice(),3<c)for(t=new Array(c-1),n=1;n<c;n++)t[n-1]=arguments[n];for(s=0,i=r.length;s<i;s++)switch(this.event=e,c){case 1:a.push(r[s].call(this));break;case 2:a.push(r[s].call(this,arguments[1]));break;case 3:a.push(r[s].call(this,arguments[1],arguments[2]));break;default:a.push(r[s].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},e.prototype.on=function(e,t){return this._on(e,t,!1)},e.prototype.prependListener=function(e,t){return this._on(e,t,!0)},e.prototype.onAny=function(e){return this._onAny(e,!1)},e.prototype.prependAny=function(e){return this._onAny(e,!0)},e.prototype.addListener=e.prototype.on,e.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},e.prototype._on=function(e,t,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||l.call(this),this.emit("newListener",e,t),this.wildcard?function(e,t){for(var i=0,s=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;i+1<s;i++)if("**"===e[i]&&"**"===e[i+1])return;for(var n=this.listenerTree,r=e.shift();r!==h;){if(n[r]||(n[r]={}),n=n[r],0===e.length)return n._listeners?("function"==typeof n._listeners&&(n._listeners=[n._listeners]),n._listeners.push(t),!n._listeners.warned&&0<this._maxListeners&&n._listeners.length>this._maxListeners&&(n._listeners.warned=!0,o.call(this,n._listeners.length,r))):n._listeners=t,!0;r=e.shift()}return!0}.call(this,e,t):this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),i?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&0<this._maxListeners&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,o.call(this,this._events[e].length,e))):this._events[e]=t,this},e.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var i=[];if(this.wildcard)var s="string"==typeof e?e.split(this.delimiter):e.slice(),i=v.call(this,null,s,this.listenerTree,0);else{if(!this._events[e])return this;o=this._events[e],i.push({_listeners:o})}for(var n=0;n<i.length;n++){var r=i[n],o=r._listeners;if(u(o)){for(var a=-1,c=0,l=o.length;c<l;c++)if(o[c]===t||o[c].listener&&o[c].listener===t||o[c]._origin&&o[c]._origin===t){a=c;break}if(!(a<0))return(this.wildcard?r._listeners:this._events[e]).splice(a,1),0===o.length&&(this.wildcard?delete r._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}else(o===t||o.listener&&o.listener===t||o._origin&&o._origin===t)&&(this.wildcard?delete r._listeners:delete this._events[e],this.emit("removeListener",e,t))}return function e(t){if(t!==h){var i,s=Object.keys(t);for(i in s){var n=s[i],r=t[n];r instanceof Function||"object"!=typeof r||null===r||(0<Object.keys(r).length&&e(t[n]),0===Object.keys(r).length&&delete t[n])}}}(this.listenerTree),this},e.prototype.offAny=function(e){var t,i=0,s=0;if(e&&this._all&&0<this._all.length){for(i=0,s=(t=this._all).length;i<s;i++)if(e===t[i])return t.splice(i,1),this.emit("removeListenerAny",e),this}else{for(i=0,s=(t=this._all).length;i<s;i++)this.emit("removeListenerAny",t[i]);this._all=[]}return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=function(e){if(0===arguments.length)return this._events&&l.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),i=v.call(this,null,t,this.listenerTree,0),s=0;s<i.length;s++)i[s]._listeners=null;else this._events&&(this._events[e]=null);return this},e.prototype.listeners=function(e){if(this.wildcard){var t=[],i="string"==typeof e?e.split(this.delimiter):e.slice();return v.call(this,t,i,this.listenerTree,0),t}return this._events||l.call(this),this._events[e]||(this._events[e]=[]),u(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},e.prototype.eventNames=function(){return Object.keys(this._events)},e.prototype.listenerCount=function(e){return this.listeners(e).length},e.prototype.listenersAny=function(){return this._all||[]},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof r?n.exports=e:window.EventEmitter2=e}).call(this,e("_process"))},{_process:4}],3:[function(e,t,i){"use strict";var c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(e){s[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},s)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var i,s,n=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++){for(var o in i=Object(arguments[r]))l.call(i,o)&&(n[o]=i[o]);if(c){s=c(i);for(var a=0;a<s.length;a++)h.call(i,s[a])&&(n[s[a]]=i[s[a]])}}return n}},{}],4:[function(e,t,i){var s,n,t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(e){s=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c,l=[],h=!1,u=-1;function p(){h&&c&&(h=!1,c.length?l=c.concat(l):u=-1,l.length&&f())}function f(){if(!h){var e=a(p);h=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new m(e,t)),1!==l.length||h||a(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=v,t.addListener=v,t.once=v,t.off=v,t.removeListener=v,t.removeAllListeners=v,t.emit=v,t.prependListener=v,t.prependOnceListener=v,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],5:[function(e,t,i){var s=this.ROSLIB||{REVISION:"1.0.1"},n=e("object-assign");n(s,e("./core")),n(s,e("./actionlib")),n(s,e("./math")),n(s,e("./tf")),n(s,e("./urdf")),t.exports=s},{"./actionlib":11,"./core":20,"./math":25,"./tf":28,"./urdf":40,"object-assign":3}],6:[function(t,e,i){(function(e){e.ROSLIB=t("./RosLib")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./RosLib":5}],7:[function(e,t,i){var s=e("../core/Topic"),n=e("../core/Message"),e=e("eventemitter2").EventEmitter2;function r(e){var i=this;e=e||{},this.ros=e.ros,this.serverName=e.serverName,this.actionName=e.actionName,this.timeout=e.timeout,this.omitFeedback=e.omitFeedback,this.omitStatus=e.omitStatus,this.omitResult=e.omitResult;var t=!(this.goals={});this.feedbackListener=new s({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.statusListener=new s({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new s({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.goalTopic=new s({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new s({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe(function(e){t=!0,e.status_list.forEach(function(e){var t=i.goals[e.goal_id.id];t&&t.emit("status",e)})}),this.omitFeedback||this.feedbackListener.subscribe(function(e){var t=i.goals[e.status.goal_id.id];t&&(t.emit("status",e.status),t.emit("feedback",e.feedback))}),this.omitResult||this.resultListener.subscribe(function(e){var t=i.goals[e.status.goal_id.id];t&&(t.emit("status",e.status),t.emit("result",e.result))}),this.timeout&&setTimeout(function(){t||i.emit("timeout")},this.timeout)}r.prototype.__proto__=e.prototype,r.prototype.cancel=function(){var e=new n;this.cancelTopic.publish(e)},r.prototype.dispose=function(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()},t.exports=r},{"../core/Message":12,"../core/Topic":19,eventemitter2:2}],8:[function(e,t,i){var r=e("../core/Topic"),e=(e("../core/Message"),e("eventemitter2").EventEmitter2);function s(e){var t=this;e=e||{},this.ros=e.ros,this.serverName=e.serverName,this.actionName=e.actionName,this.timeout=e.timeout,this.omitFeedback=e.omitFeedback,this.omitStatus=e.omitStatus,this.omitResult=e.omitResult;var i=new r({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),s=new r({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),n=new r({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),e=new r({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});i.subscribe(function(e){t.emit("goal",e)}),n.subscribe(function(e){e.status_list.forEach(function(e){t.emit("status",e)})}),s.subscribe(function(e){t.emit("status",e.status),t.emit("feedback",e.feedback)}),e.subscribe(function(e){t.emit("status",e.status),t.emit("result",e.result)})}s.prototype.__proto__=e.prototype,t.exports=s},{"../core/Message":12,"../core/Topic":19,eventemitter2:2}],9:[function(e,t,i){var s=e("../core/Message"),e=e("eventemitter2").EventEmitter2;function n(e){var t=this;this.actionClient=e.actionClient,this.goalMessage=e.goalMessage,this.isFinished=!1;e=new Date;this.goalID="goal_"+Math.random()+"_"+e.getTime(),this.goalMessage=new s({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(e){t.status=e}),this.on("result",function(e){t.isFinished=!0,t.result=e}),this.on("feedback",function(e){t.feedback=e}),this.actionClient.goals[this.goalID]=this}n.prototype.__proto__=e.prototype,n.prototype.send=function(e){var t=this;t.actionClient.goalTopic.publish(t.goalMessage),e&&setTimeout(function(){t.isFinished||t.emit("timeout")},e)},n.prototype.cancel=function(){var e=new s({id:this.goalID});this.actionClient.cancelTopic.publish(e)},t.exports=n},{"../core/Message":12,eventemitter2:2}],10:[function(e,t,i){var r=e("../core/Topic"),o=e("../core/Message"),e=e("eventemitter2").EventEmitter2;function s(e){var i=this;e=e||{},this.ros=e.ros,this.serverName=e.serverName,this.actionName=e.actionName,this.feedbackPublisher=new r({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var s=new r({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});s.advertise(),this.resultPublisher=new r({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var t=new r({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),e=new r({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new o({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,t.subscribe(function(e){i.currentGoal?(i.nextGoal=e,i.emit("cancel")):(i.statusMessage.status_list=[{goal_id:e.goal_id,status:1}],i.currentGoal=e,i.emit("goal",e.goal))});function n(e,t){return!(e.secs>t.secs)&&(e.secs<t.secs||e.nsecs<t.nsecs)}e.subscribe(function(e){0===e.stamp.secs&&0===e.stamp.secs&&""===e.id?(i.nextGoal=null,i.currentGoal&&i.emit("cancel")):(i.currentGoal&&e.id===i.currentGoal.goal_id.id?i.emit("cancel"):i.nextGoal&&e.id===i.nextGoal.goal_id.id&&(i.nextGoal=null),i.nextGoal&&n(i.nextGoal.goal_id.stamp,e.stamp)&&(i.nextGoal=null),i.currentGoal&&n(i.currentGoal.goal_id.stamp,e.stamp)&&i.emit("cancel"))});setInterval(function(){var e=new Date,t=Math.floor(e.getTime()/1e3),e=Math.round(1e9*(e.getTime()/1e3-t));i.statusMessage.header.stamp.secs=t,i.statusMessage.header.stamp.nsecs=e,s.publish(i.statusMessage)},500)}s.prototype.__proto__=e.prototype,s.prototype.setSucceeded=function(e){e=new o({status:{goal_id:this.currentGoal.goal_id,status:3},result:e});this.resultPublisher.publish(e),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},s.prototype.sendFeedback=function(e){e=new o({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:e});this.feedbackPublisher.publish(e)},s.prototype.setPreempted=function(){this.statusMessage.status_list=[];var e=new o({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(e),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},t.exports=s},{"../core/Message":12,"../core/Topic":19,eventemitter2:2}],11:[function(e,t,i){var s=e("../core/Ros");e("../mixin")(s,["ActionClient","SimpleActionServer"],t.exports={ActionClient:e("./ActionClient"),ActionListener:e("./ActionListener"),Goal:e("./Goal"),SimpleActionServer:e("./SimpleActionServer")})},{"../core/Ros":14,"../mixin":26,"./ActionClient":7,"./ActionListener":8,"./Goal":9,"./SimpleActionServer":10}],12:[function(e,t,i){var s=e("object-assign");t.exports=function(e){s(this,e)}},{"object-assign":3}],13:[function(e,t,i){var s=e("./Service"),n=e("./ServiceRequest");function r(e){e=e||{},this.ros=e.ros,this.name=e.name}r.prototype.get=function(t){var e=new s({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),i=new n({name:this.name});e.callService(i,function(e){e=JSON.parse(e.value);t(e)})},r.prototype.set=function(e,t){var i=new s({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),e=new n({name:this.name,value:JSON.stringify(e)});i.callService(e,t)},r.prototype.delete=function(e){var t=new s({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),i=new n({name:this.name});t.callService(i,e)},t.exports=r},{"./Service":15,"./ServiceRequest":16}],14:[function(e,t,i){var s=e("ws"),n=e("./SocketAdapter.js"),r=e("./Service"),o=e("./ServiceRequest"),a=e("object-assign"),e=e("eventemitter2").EventEmitter2;function c(e){e=e||{},this.socket=null,this.idCounter=0,this.isConnected=!1,this.transportLibrary=e.transportLibrary||"websocket",this.transportOptions=e.transportOptions||{},void 0===e.groovyCompatibility?this.groovyCompatibility=!0:this.groovyCompatibility=e.groovyCompatibility,this.setMaxListeners(0),e.url&&this.connect(e.url)}c.prototype.__proto__=e.prototype,c.prototype.connect=function(e){"socket.io"===this.transportLibrary?(this.socket=a(io(e,{"force new connection":!0}),n(this)),this.socket.on("connect",this.socket.onopen),this.socket.on("data",this.socket.onmessage),this.socket.on("close",this.socket.onclose),this.socket.on("error",this.socket.onerror)):"RTCPeerConnection"===this.transportLibrary.constructor.name?this.socket=a(this.transportLibrary.createDataChannel(e,this.transportOptions),n(this)):this.socket&&this.socket.readyState!==s.CLOSED||((e=new s(e)).binaryType="arraybuffer",this.socket=a(e,n(this)))},c.prototype.close=function(){this.socket&&this.socket.close()},c.prototype.authenticate=function(e,t,i,s,n,r,o){o={op:"auth",mac:e,client:t,dest:i,rand:s,t:n,level:r,end:o};this.callOnConnection(o)},c.prototype.callOnConnection=function(e){var t=this,i=JSON.stringify(e),s=null,s="socket.io"===this.transportLibrary?function(e){t.socket.emit("operation",e)}:function(e){t.socket.send(e)};this.isConnected?s(i):t.once("connection",function(){s(i)})},c.prototype.setStatusLevel=function(e,t){t={op:"set_level",level:e,id:t};this.callOnConnection(t)},c.prototype.getActionServers=function(t,i){var e=new r({ros:this,name:"/rosapi/action_servers",serviceType:"rosapi/GetActionServers"}),s=new o({});"function"==typeof i?e.callService(s,function(e){t(e.action_servers)},function(e){i(e)}):e.callService(s,function(e){t(e.action_servers)})},c.prototype.getTopics=function(t,i){var e=new r({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),s=new o;"function"==typeof i?e.callService(s,function(e){t(e)},function(e){i(e)}):e.callService(s,function(e){t(e)})},c.prototype.getTopicsForType=function(e,t,i){var s=new r({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),e=new o({type:e});"function"==typeof i?s.callService(e,function(e){t(e.topics)},function(e){i(e)}):s.callService(e,function(e){t(e.topics)})},c.prototype.getServices=function(t,i){var e=new r({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),s=new o;"function"==typeof i?e.callService(s,function(e){t(e.services)},function(e){i(e)}):e.callService(s,function(e){t(e.services)})},c.prototype.getServicesForType=function(e,t,i){var s=new r({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),e=new o({type:e});"function"==typeof i?s.callService(e,function(e){t(e.services)},function(e){i(e)}):s.callService(e,function(e){t(e.services)})},c.prototype.getServiceRequestDetails=function(e,t,i){var s=new r({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),e=new o({type:e});"function"==typeof i?s.callService(e,function(e){t(e)},function(e){i(e)}):s.callService(e,function(e){t(e)})},c.prototype.getServiceResponseDetails=function(e,t,i){var s=new r({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),e=new o({type:e});"function"==typeof i?s.callService(e,function(e){t(e)},function(e){i(e)}):s.callService(e,function(e){t(e)})},c.prototype.getNodes=function(t,i){var e=new r({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),s=new o;"function"==typeof i?e.callService(s,function(e){t(e.nodes)},function(e){i(e)}):e.callService(s,function(e){t(e.nodes)})},c.prototype.getNodeDetails=function(e,t,i){var s=new r({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),e=new o({node:e});"function"==typeof i?s.callService(e,function(e){t(e.subscribing,e.publishing,e.services)},function(e){i(e)}):s.callService(e,function(e){t(e)})},c.prototype.getParams=function(t,i){var e=new r({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),s=new o;"function"==typeof i?e.callService(s,function(e){t(e.names)},function(e){i(e)}):e.callService(s,function(e){t(e.names)})},c.prototype.getTopicType=function(e,t,i){var s=new r({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),e=new o({topic:e});"function"==typeof i?s.callService(e,function(e){t(e.type)},function(e){i(e)}):s.callService(e,function(e){t(e.type)})},c.prototype.getServiceType=function(e,t,i){var s=new r({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),e=new o({service:e});"function"==typeof i?s.callService(e,function(e){t(e.type)},function(e){i(e)}):s.callService(e,function(e){t(e.type)})},c.prototype.getMessageDetails=function(e,t,i){var s=new r({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),e=new o({type:e});"function"==typeof i?s.callService(e,function(e){t(e.typedefs)},function(e){i(e)}):s.callService(e,function(e){t(e.typedefs)})},c.prototype.decodeTypeDefs=function(e){var h=this,u=function(e,t){for(var i={},s=0;s<e.fieldnames.length;s++){var n=e.fieldarraylen[s],r=e.fieldnames[s],o=e.fieldtypes[s];if(-1===o.indexOf("/"))i[r]=-1===n?o:[o];else{for(var a,c=!1,l=0;l<t.length;l++)if(t[l].type.toString()===o.toString()){c=t[l];break}c?(a=u(c,t),-1===n||(i[r]=[a])):h.emit("error","Cannot find "+o+" in decodeTypeDefs")}}return i};return u(e[0],e)},t.exports=c},{"./Service":15,"./ServiceRequest":16,"./SocketAdapter.js":18,eventemitter2:2,"object-assign":3,ws:42}],15:[function(e,t,i){var n=e("./ServiceResponse"),e=(e("./ServiceRequest"),e("eventemitter2").EventEmitter2);function s(e){e=e||{},this.ros=e.ros,this.name=e.name,this.serviceType=e.serviceType,this.isAdvertised=!1,this._serviceCallback=null}s.prototype.__proto__=e.prototype,s.prototype.callService=function(e,t,i){var s;this.isAdvertised||(s="call_service:"+this.name+":"+ ++this.ros.idCounter,(t||i)&&this.ros.once(s,function(e){void 0!==e.result&&!1===e.result?"function"==typeof i&&i(e.values):"function"==typeof t&&t(new n(e.values))}),e={op:"call_service",id:s,service:this.name,type:this.serviceType,args:e},this.ros.callOnConnection(e))},s.prototype.advertise=function(e){this.isAdvertised||"function"!=typeof e||(this._serviceCallback=e,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},s.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},s.prototype._serviceResponse=function(e){var t={},i=this._serviceCallback(e.args,t),i={op:"service_response",service:this.name,values:new n(t),result:i};e.id&&(i.id=e.id),this.ros.callOnConnection(i)},t.exports=s},{"./ServiceRequest":16,"./ServiceResponse":17,eventemitter2:2}],16:[function(e,t,i){var s=e("object-assign");t.exports=function(e){s(this,e)}},{"object-assign":3}],17:[function(e,t,i){var s=e("object-assign");t.exports=function(e){s(this,e)}},{"object-assign":3}],18:[function(e,t,i){"use strict";var n=e("../util/decompressPng"),r=e("cbor-js"),o=e("../util/cborTypedArrayTags"),a=(e("ws"),null);"undefined"!=typeof bson&&(a=bson().BSON),t.exports=function(t){function i(e){"publish"===e.op?t.emit(e.topic,e.msg):"service_response"===e.op?t.emit(e.id,e):"call_service"===e.op?t.emit(e.service,e):"status"===e.op&&(e.id?t.emit("status:"+e.id,e):t.emit("status",e))}function s(e,t){"png"===e.op?n(e.data,t):t(e)}return{onopen:function(e){t.isConnected=!0,t.emit("connection",e)},onclose:function(e){t.isConnected=!1,t.emit("close",e)},onerror:function(e){t.emit("error",e)},onmessage:function(e){"undefined"!=typeof Blob&&e.data instanceof Blob?function(e,t){if(!a)throw"Cannot process BSON encoded message without BSON header.";var i=new FileReader;i.onload=function(){var e=new Uint8Array(this.result),e=a.deserialize(e);t(e)},i.readAsArrayBuffer(e)}(e.data,function(e){s(e,i)}):e.data instanceof ArrayBuffer?i(r.decode(e.data,o)):s(JSON.parse("string"==typeof e?e:e.data),i)}}}},{"../util/cborTypedArrayTags":41,"../util/decompressPng":44,"cbor-js":1,ws:42}],19:[function(e,t,i){var s=e("eventemitter2").EventEmitter2,n=e("./Message");function r(e){e=e||{},this.ros=e.ros,this.name=e.name,this.messageType=e.messageType,this.isAdvertised=!1,this.compression=e.compression||"none",this.throttle_rate=e.throttle_rate||0,this.latch=e.latch||!1,this.queue_size=e.queue_size||100,this.queue_length=e.queue_length||0,this.reconnect_on_close=e.reconnect_on_close||!0,this.compression&&"png"!==this.compression&&"cbor"!==this.compression&&"none"!==this.compression&&(this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var t=this;this.reconnect_on_close?this.callForSubscribeAndAdvertise=function(e){t.ros.callOnConnection(e),t.waitForReconnect=!1,t.reconnectFunc=function(){t.waitForReconnect||(t.waitForReconnect=!0,t.ros.callOnConnection(e),t.ros.once("connection",function(){t.waitForReconnect=!1}))},t.ros.on("close",t.reconnectFunc)}:this.callForSubscribeAndAdvertise=this.ros.callOnConnection,this._messageCallback=function(e){t.emit("message",new n(e))}}r.prototype.__proto__=s.prototype,r.prototype.subscribe=function(e){"function"==typeof e&&this.on("message",e),this.subscribeId||(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},r.prototype.unsubscribe=function(e){e&&(this.off("message",e),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},r.prototype.advertise=function(){var e;this.isAdvertised||(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,this.reconnect_on_close||(e=this).ros.on("close",function(){e.isAdvertised=!1}))},r.prototype.unadvertise=function(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},r.prototype.publish=function(e){this.isAdvertised||this.advertise(),this.ros.idCounter++;e={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:e,latch:this.latch};this.ros.callOnConnection(e)},t.exports=r},{"./Message":12,eventemitter2:2}],20:[function(e,t,i){var s=e("../mixin"),e=t.exports={Ros:e("./Ros"),Topic:e("./Topic"),Message:e("./Message"),Param:e("./Param"),Service:e("./Service"),ServiceRequest:e("./ServiceRequest"),ServiceResponse:e("./ServiceResponse")};s(e.Ros,["Param","Service","Topic"],e)},{"../mixin":26,"./Message":12,"./Param":13,"./Ros":14,"./Service":15,"./ServiceRequest":16,"./ServiceResponse":17,"./Topic":19}],21:[function(e,t,i){var s=e("./Vector3"),n=e("./Quaternion");function r(e){e=e||{},this.position=new s(e.position),this.orientation=new n(e.orientation)}r.prototype.applyTransform=function(e){this.position.multiplyQuaternion(e.rotation),this.position.add(e.translation);e=e.rotation.clone();e.multiply(this.orientation),this.orientation=e},r.prototype.clone=function(){return new r(this)},r.prototype.multiply=function(e){e=e.clone();return e.applyTransform({rotation:this.orientation,translation:this.position}),e},r.prototype.getInverse=function(){var e=this.clone();return e.orientation.invert(),e.position.multiplyQuaternion(e.orientation),e.position.x*=-1,e.position.y*=-1,e.position.z*=-1,e},t.exports=r},{"./Quaternion":22,"./Vector3":24}],22:[function(e,t,i){function s(e){e=e||{},this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w="number"==typeof e.w?e.w:1}s.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},s.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},s.prototype.normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e)},s.prototype.invert=function(){this.conjugate(),this.normalize()},s.prototype.multiply=function(e){var t=this.x*e.w+this.y*e.z-this.z*e.y+this.w*e.x,i=-this.x*e.z+this.y*e.w+this.z*e.x+this.w*e.y,s=this.x*e.y-this.y*e.x+this.z*e.w+this.w*e.z,e=-this.x*e.x-this.y*e.y-this.z*e.z+this.w*e.w;this.x=t,this.y=i,this.z=s,this.w=e},s.prototype.clone=function(){return new s(this)},t.exports=s},{}],23:[function(e,t,i){var s=e("./Vector3"),n=e("./Quaternion");function r(e){e=e||{},this.translation=new s(e.translation),this.rotation=new n(e.rotation)}r.prototype.clone=function(){return new r(this)},t.exports=r},{"./Quaternion":22,"./Vector3":24}],24:[function(e,t,i){function s(e){e=e||{},this.x=e.x||0,this.y=e.y||0,this.z=e.z||0}s.prototype.add=function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z},s.prototype.subtract=function(e){this.x-=e.x,this.y-=e.y,this.z-=e.z},s.prototype.multiplyQuaternion=function(e){var t=e.w*this.x+e.y*this.z-e.z*this.y,i=e.w*this.y+e.z*this.x-e.x*this.z,s=e.w*this.z+e.x*this.y-e.y*this.x,n=-e.x*this.x-e.y*this.y-e.z*this.z;this.x=t*e.w+n*-e.x+i*-e.z-s*-e.y,this.y=i*e.w+n*-e.y+s*-e.x-t*-e.z,this.z=s*e.w+n*-e.z+t*-e.y-i*-e.x},s.prototype.clone=function(){return new s(this)},t.exports=s},{}],25:[function(e,t,i){t.exports={Pose:e("./Pose"),Quaternion:e("./Quaternion"),Transform:e("./Transform"),Vector3:e("./Vector3")}},{"./Pose":21,"./Quaternion":22,"./Transform":23,"./Vector3":24}],26:[function(e,t,i){t.exports=function(i,e,s){e.forEach(function(e){var t=s[e];i.prototype[e]=function(e){return e.ros=this,new t(e)}})}},{}],27:[function(e,t,i){e("../actionlib/ActionClient");var s=e("../actionlib/Goal"),n=(e("../core/Service.js"),e("../core/ServiceRequest.js")),r=e("../math/Transform");function o(e){e=e||{},this.ros=e.ros,this.fixedFrame=e.fixedFrame||"/base_link",this.angularThres=e.angularThres||2,this.transThres=e.transThres||.01,this.rate=e.rate||10,this.updateDelay=e.updateDelay||50;var t=e.topicTimeout||2,i=Math.floor(t),t=Math.floor(1e9*(t-i));this.topicTimeout={secs:i,nsecs:t},this.serverName=e.serverName||"/tf2_web_republisher",this.repubServiceName=e.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this.actionClient=this.ros.ActionClient({serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=this.ros.Service({name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}o.prototype.processTFArray=function(e){e.transforms.forEach(function(e){var t=e.child_frame_id;"/"===t[0]&&(t=t.substring(1));var i=this.frameInfos[t];i&&(i.transform=new r({translation:e.transform.translation,rotation:e.transform.rotation}),i.cbs.forEach(function(e){e(i.transform)}))},this)},o.prototype.updateGoal=function(){var e={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};this.ros.groovyCompatibility?(this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new s({actionClient:this.actionClient,goalMessage:e}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send()):(e.timeout=this.topicTimeout,e=new n(e),this.serviceClient.callService(e,this.processResponse.bind(this))),this.republisherUpdateRequested=!1},o.prototype.processResponse=function(e){this.currentTopic&&this.currentTopic.unsubscribe(),this.currentTopic=this.ros.Topic({name:e.topic_name,messageType:"tf2_web_republisher/TFArray"}),this.currentTopic.subscribe(this.processTFArray.bind(this))},o.prototype.subscribe=function(e,t){"/"===e[0]&&(e=e.substring(1)),this.frameInfos[e]?this.frameInfos[e].transform&&t(this.frameInfos[e].transform):(this.frameInfos[e]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[e].cbs.push(t)},o.prototype.unsubscribe=function(e,t){"/"===e[0]&&(e=e.substring(1));for(var i=this.frameInfos[e],s=i&&i.cbs||[],n=s.length;n--;)s[n]===t&&s.splice(n,1);t&&0!==s.length||delete this.frameInfos[e]},o.prototype.dispose=function(){this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe()},t.exports=o},{"../actionlib/ActionClient":7,"../actionlib/Goal":9,"../core/Service.js":15,"../core/ServiceRequest.js":16,"../math/Transform":23}],28:[function(e,t,i){var s=e("../core/Ros");e("../mixin")(s,["TFClient"],t.exports={TFClient:e("./TFClient")})},{"../core/Ros":14,"../mixin":26,"./TFClient":27}],29:[function(e,t,i){var s=e("../math/Vector3"),n=e("./UrdfTypes");t.exports=function(e){this.dimension=null,this.type=n.URDF_BOX,e=e.xml.getAttribute("size").split(" "),this.dimension=new s({x:parseFloat(e[0]),y:parseFloat(e[1]),z:parseFloat(e[2])})}},{"../math/Vector3":24,"./UrdfTypes":38}],30:[function(e,t,i){t.exports=function(e){e=e.xml.getAttribute("rgba").split(" "),this.r=parseFloat(e[0]),this.g=parseFloat(e[1]),this.b=parseFloat(e[2]),this.a=parseFloat(e[3])}},{}],31:[function(e,t,i){var s=e("./UrdfTypes");t.exports=function(e){this.type=s.URDF_CYLINDER,this.length=parseFloat(e.xml.getAttribute("length")),this.radius=parseFloat(e.xml.getAttribute("radius"))}},{"./UrdfTypes":38}],32:[function(e,t,i){var c=e("../math/Pose"),l=e("../math/Vector3"),h=e("../math/Quaternion");t.exports=function(e){this.name=e.xml.getAttribute("name"),this.type=e.xml.getAttribute("type");var t=e.xml.getElementsByTagName("parent");0<t.length&&(this.parent=t[0].getAttribute("link"));var i=e.xml.getElementsByTagName("child");0<i.length&&(this.child=i[0].getAttribute("link"));var s=e.xml.getElementsByTagName("limit");0<s.length&&(this.minval=parseFloat(s[0].getAttribute("lower")),this.maxval=parseFloat(s[0].getAttribute("upper")));var n,r,o,a=e.xml.getElementsByTagName("origin");0===a.length?this.origin=new c:(r=a[0].getAttribute("xyz"),n=new l,r&&(r=r.split(" "),n=new l({x:parseFloat(r[0]),y:parseFloat(r[1]),z:parseFloat(r[2])})),o=a[0].getAttribute("rpy"),t=new h,o&&(o=o.split(" "),i=parseFloat(o[0])/2,s=parseFloat(o[1])/2,e=parseFloat(o[2])/2,r=Math.sin(i)*Math.cos(s)*Math.cos(e)-Math.cos(i)*Math.sin(s)*Math.sin(e),a=Math.cos(i)*Math.sin(s)*Math.cos(e)+Math.sin(i)*Math.cos(s)*Math.sin(e),o=Math.cos(i)*Math.cos(s)*Math.sin(e)-Math.sin(i)*Math.sin(s)*Math.cos(e),e=Math.cos(i)*Math.cos(s)*Math.cos(e)+Math.sin(i)*Math.sin(s)*Math.sin(e),(t=new h({x:r,y:a,z:o,w:e})).normalize()),this.origin=new c({position:n,orientation:t}))}},{"../math/Pose":21,"../math/Quaternion":22,"../math/Vector3":24}],33:[function(e,t,i){var s=e("./UrdfVisual");t.exports=function(e){this.name=e.xml.getAttribute("name"),this.visuals=[];for(var t=e.xml.getElementsByTagName("visual"),i=0;i<t.length;i++)this.visuals.push(new s({xml:t[i]}))}},{"./UrdfVisual":39}],34:[function(e,t,i){var s=e("./UrdfColor");function n(e){this.textureFilename=null,this.color=null,this.name=e.xml.getAttribute("name");var t=e.xml.getElementsByTagName("texture");0<t.length&&(this.textureFilename=t[0].getAttribute("filename"));e=e.xml.getElementsByTagName("color");0<e.length&&(this.color=new s({xml:e[0]}))}n.prototype.isLink=function(){return null===this.color&&null===this.textureFilename};var r=e("object-assign");n.prototype.assign=function(e){return r(this,e)},t.exports=n},{"./UrdfColor":30,"object-assign":3}],35:[function(e,t,i){var s=e("../math/Vector3"),n=e("./UrdfTypes");t.exports=function(e){this.scale=null,this.type=n.URDF_MESH,this.filename=e.xml.getAttribute("filename"),(e=e.xml.getAttribute("scale"))&&(e=e.split(" "),this.scale=new s({x:parseFloat(e[0]),y:parseFloat(e[1]),z:parseFloat(e[2])}))}},{"../math/Vector3":24,"./UrdfTypes":38}],36:[function(e,t,i){var l=e("./UrdfMaterial"),h=e("./UrdfLink"),u=e("./UrdfJoint"),p=e("xmldom").DOMParser;t.exports=function(e){var t=(e=e||{}).xml,e=e.string;this.materials={},this.links={},this.joints={},e&&(t=(new p).parseFromString(e,"text/xml")),t=t.documentElement,this.name=t.getAttribute("name");for(var i=t.childNodes,s=0;s<i.length;s++){var n=i[s];if("material"===n.tagName){var r=new l({xml:n});void 0!==this.materials[r.name]?this.materials[r.name].isLink()?this.materials[r.name].assign(r):console.warn("Material "+r.name+"is not unique."):this.materials[r.name]=r}else if("link"===n.tagName){var o=new h({xml:n});if(void 0!==this.links[o.name])console.warn("Link "+o.name+" is not unique.");else{for(var a=0;a<o.visuals.length;a++){var c=o.visuals[a].material;null!==c&&(void 0!==this.materials[c.name]?o.visuals[a].material=this.materials[c.name]:this.materials[c.name]=c)}this.links[o.name]=o}}else"joint"===n.tagName&&(n=new u({xml:n}),this.joints[n.name]=n)}}},{"./UrdfJoint":32,"./UrdfLink":33,"./UrdfMaterial":34,xmldom:45}],37:[function(e,t,i){var s=e("./UrdfTypes");t.exports=function(e){this.type=s.URDF_SPHERE,this.radius=parseFloat(e.xml.getAttribute("radius"))}},{"./UrdfTypes":38}],38:[function(e,t,i){t.exports={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}},{}],39:[function(e,t,i){var f=e("../math/Pose"),m=e("../math/Vector3"),v=e("../math/Quaternion"),d=e("./UrdfCylinder"),y=e("./UrdfBox"),g=e("./UrdfMaterial"),b=e("./UrdfMesh"),w=e("./UrdfSphere");t.exports=function(e){var t=e.xml;this.origin=null,this.geometry=null,this.material=null;var i,s,n,r,o,a=t.getElementsByTagName("origin");0===a.length?this.origin=new f:(r=a[0].getAttribute("xyz"),i=new m,r&&(r=r.split(" "),i=new m({x:parseFloat(r[0]),y:parseFloat(r[1]),z:parseFloat(r[2])})),o=a[0].getAttribute("rpy"),c=new v,o&&(o=o.split(" "),s=parseFloat(o[0])/2,n=parseFloat(o[1])/2,e=parseFloat(o[2])/2,r=Math.sin(s)*Math.cos(n)*Math.cos(e)-Math.cos(s)*Math.sin(n)*Math.sin(e),a=Math.cos(s)*Math.sin(n)*Math.cos(e)+Math.sin(s)*Math.cos(n)*Math.sin(e),o=Math.cos(s)*Math.cos(n)*Math.sin(e)-Math.sin(s)*Math.sin(n)*Math.cos(e),e=Math.cos(s)*Math.cos(n)*Math.cos(e)+Math.sin(s)*Math.sin(n)*Math.sin(e),(c=new v({x:r,y:a,z:o,w:e})).normalize()),this.origin=new f({position:i,orientation:c}));var c=t.getElementsByTagName("geometry");if(0<c.length){for(var l=c[0],h=null,u=0;u<l.childNodes.length;u++){var p=l.childNodes[u];if(1===p.nodeType){h=p;break}}c=h.nodeName;"sphere"===c?this.geometry=new w({xml:h}):"box"===c?this.geometry=new y({xml:h}):"cylinder"===c?this.geometry=new d({xml:h}):"mesh"===c?this.geometry=new b({xml:h}):console.warn("Unknown geometry type "+c)}0<(t=t.getElementsByTagName("material")).length&&(this.material=new g({xml:t[0]}))}},{"../math/Pose":21,"../math/Quaternion":22,"../math/Vector3":24,"./UrdfBox":29,"./UrdfCylinder":31,"./UrdfMaterial":34,"./UrdfMesh":35,"./UrdfSphere":37}],40:[function(e,t,i){t.exports=e("object-assign")({UrdfBox:e("./UrdfBox"),UrdfColor:e("./UrdfColor"),UrdfCylinder:e("./UrdfCylinder"),UrdfLink:e("./UrdfLink"),UrdfMaterial:e("./UrdfMaterial"),UrdfMesh:e("./UrdfMesh"),UrdfModel:e("./UrdfModel"),UrdfSphere:e("./UrdfSphere"),UrdfVisual:e("./UrdfVisual")},e("./UrdfTypes"))},{"./UrdfBox":29,"./UrdfColor":30,"./UrdfCylinder":31,"./UrdfLink":33,"./UrdfMaterial":34,"./UrdfMesh":35,"./UrdfModel":36,"./UrdfSphere":37,"./UrdfTypes":38,"./UrdfVisual":39,"object-assign":3}],41:[function(e,t,i){"use strict";var h=Math.pow(2,32),s=!1;function u(){s||(s=!0,console.warn("CBOR 64-bit integer array values may lose precision. No further warnings."))}var o={64:Uint8Array,69:Uint16Array,70:Uint32Array,72:Int8Array,77:Int16Array,78:Int32Array,85:Float32Array,86:Float64Array},a={71:function(e){u();for(var t=e.byteLength,i=e.byteOffset,s=t/8,t=e.buffer.slice(i,i+t),n=new Uint32Array(t),r=new Array(s),o=0;o<s;o++){var a=2*o,c=n[a],a=n[1+a];r[o]=c+h*a}return r},79:function(e){u();for(var t=e.byteLength,i=e.byteOffset,s=t/8,t=e.buffer.slice(i,i+t),n=new Uint32Array(t),r=new Int32Array(t),o=new Array(s),a=0;a<s;a++){var c=2*a,l=n[c],c=r[1+c];o[a]=l+h*c}return o}};void 0!==t&&t.exports&&(t.exports=function(e,t){var i,s,n,r;return t in o?(s=o[t],n=(i=e).byteLength,r=i.byteOffset,new s(i.buffer.slice(r,r+n))):t in a?a[t](e):e})},{}],42:[function(e,t,i){t.exports=window.WebSocket},{}],43:[function(e,t,i){t.exports=function(){return document.createElement("canvas")}},{}],44:[function(e,t,i){"use strict";var a=e("canvas"),s=a.Image||window.Image;t.exports=function(e,r){var o=new s;o.onload=function(){var e=new a,t=e.getContext("2d");e.width=o.width,e.height=o.height,t.imageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.drawImage(o,0,0);for(var i=t.getImageData(0,0,o.width,o.height).data,s="",n=0;n<i.length;n+=4)s+=String.fromCharCode(i[n],i[n+1],i[n+2]);r(JSON.parse(s))},o.src="data:image/png;base64,"+e}},{canvas:43}],45:[function(e,t,i){i.DOMImplementation=window.DOMImplementation,i.XMLSerializer=window.XMLSerializer,i.DOMParser=window.DOMParser},{}]},{},[6]);